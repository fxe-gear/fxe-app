<ion-view title="Friends">
  <ion-content padding="true" class="friends">

    <div class="row button-bar range-bar" ng-if="loggedIn">
      <button ng-click="changeRange('last')" ng-class="{'button-outline': range != 'last'}" class="col button button-small button-dark">last lesson</button>
      <button ng-click="changeRange('week')" ng-class="{'button-outline': range != 'week'}" class="col button button-small button-dark">week</button>
      <button ng-click="changeRange('month')" ng-class="{'button-outline': range != 'month'}" class="col button button-small button-dark">month</button>
    </div>

    <p class="login-request" ng-if="!loggedIn">Please login to start competiting with friends.</p>
    <a ng-click="goto('welcome')" class="button button-block button-balanced" ng-if="!loggedIn">Login</a>

    <div class="card list" ng-if="loggedIn">
      <div class="item item-divider">
        Scoreboard
      </div>
      <div class="item item-avatar" ng-repeat="(id, person) in friends | orderByScoreDesc:range">
        <img ng-src="{{ ::person.picture }}" alt="avatar">
        <h2>{{ ::person.name }}</h2>
        <p>
          <strong>
            {{ person.score[range] || 0 | number:0 }}
            <ng-pluralize count="person.score[range]" when="{1: 'point', 'other': 'points'}"></ng-pluralize>
          </strong>
          <span ng-switch on="range">
            <span ng-switch-when="last">from last lesson</span>
          <span ng-switch-when="week">this week</span>
          <span ng-switch-when="month">this month</span>
          </span>
        </p>
      </div>
      <p class="item no-result" ng-if="loggedIn && !hasFriends()">None of your friends is using FXE.</p>
    </div>


  </ion-content>
</ion-view>
